<Page
	x:Name="PageRoot"
	x:Class="RemoteLogViewer.Views.Settings.HighlightSettingsPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:views="using:RemoteLogViewer.Views.Settings"
	xmlns:highlight="using:RemoteLogViewer.ViewModels.Settings.Highlight"
	mc:Ignorable="d">
	<Grid Padding="16" RowSpacing="12" ColumnSpacing="16">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="260" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<StackPanel Grid.Column="0" Grid.Row="0" Spacing="8">
			<TextBlock Text="Highlight Settings" FontWeight="SemiBold" FontSize="14" />
			<StackPanel Orientation="Horizontal" Spacing="4">
				<Button x:Name="AddSettingButton" Content="Add Setting" Command="{x:Bind ViewModel.AddSettingCommand,Mode=OneWay}"/>
				<Button x:Name="RemoveSettingButton" Content="Remove" Command="{x:Bind ViewModel.RemoveSettingCommand,Mode=OneWay}"/>
			</StackPanel>
			<ListView ItemsSource="{x:Bind ViewModel.Settings,Mode=OneWay}" SelectedItem="{x:Bind ViewModel.SelectedSetting.Value, Mode=TwoWay}">
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="highlight:HighlightSettingViewModel">
						<TextBlock Text="{x:Bind Name.Value}"/>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</StackPanel>
		<Grid Grid.Column="1" Grid.Row="0" RowSpacing="12">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>
			<StackPanel Orientation="Horizontal" Spacing="8" Grid.Row="0">
				<TextBlock Text="Setting Name" VerticalAlignment="Center" />
				<TextBox x:Name="SettingNameTextBox" Width="240" Text="{x:Bind ViewModel.SelectedSetting.Value.Name.Value, Mode=TwoWay}"/>
			</StackPanel>
			<StackPanel Grid.Row="1" Spacing="8">
				<TextBlock Text="Highlight Conditions" FontWeight="SemiBold" />
				<Button x:Name="AddConditionButton" Content="Add Condition" Width="140" Command="{x:Bind ViewModel.SelectedSetting.Value.AddConditionCommand,Mode=OneWay}"/>
				<Button Content="Remove Condition" HorizontalAlignment="Left" Command="{x:Bind ViewModel.SelectedSetting.Value.RemoveConditionCommand,Mode=OneWay}" CommandParameter="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value,Mode=OneWay}"/>
				<ListBox x:Name="ConditionsItemsControl" Height="240" ItemsSource="{x:Bind ViewModel.SelectedSetting.Value.Conditions,Mode=OneWay}" SelectedItem="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value,Mode=TwoWay}">
					<ListBox.ItemTemplate>
						<DataTemplate x:DataType="highlight:HighlightConditionViewModel">
							<TextBlock Text="{x:Bind Pattern.Value}" />
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
				<Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="8" Margin="0,0,0,8">
					<StackPanel Spacing="6">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<TextBlock Text="Pattern" Width="60" VerticalAlignment="Center" />
							<TextBox Width="240" Text="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.Pattern.Value, Mode=TwoWay}" />
						</StackPanel>
						<StackPanel Orientation="Horizontal" Spacing="8">
							<TextBlock Text="Type" Width="60" VerticalAlignment="Center" />
							<ComboBox Width="160" SelectedItem="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.PatternType.Value, Mode=TwoWay}">
								<ComboBoxItem Content="Regex" />
								<ComboBoxItem Content="Exact" />
							</ComboBox>
							<CheckBox Content="Ignore Case" IsChecked="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.IgnoreCase.Value, Mode=TwoWay}"/>
							<CheckBox Content="Only Match" IsChecked="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.HighlightOnlyMatch.Value, Mode=TwoWay}" />
						</StackPanel>
						<StackPanel Orientation="Horizontal" Spacing="8">
							<TextBlock Text="Fore" Width="60" VerticalAlignment="Center" />
							<ColorPicker Width="160" Color="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.ForeColor.Value, Mode=TwoWay}" IsAlphaEnabled="False" />
							<TextBlock Text="Back" Width="60" VerticalAlignment="Center" />
							<ColorPicker Width="160" Color="{x:Bind ViewModel.SelectedSetting.Value.SelectedCondition.Value.BackColor.Value, Mode=TwoWay}" IsAlphaEnabled="True" />
						</StackPanel>
					</StackPanel>
				</Border>
			</StackPanel>
		</Grid>
		<StackPanel Grid.ColumnSpan="2" Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
			<Button x:Name="OkButton" Content="OK" Width="100" />
			<Button x:Name="CancelButton" Content="Cancel" Width="100" />
		</StackPanel>
	</Grid>
</Page>